---
- type: Query
  field: getGameById
  dataSource: games
  requestMapping: |
    {
      "version": "2017-02-28",
      "operation": "GetItem",
      "key": {
          "gameId": $util.dynamodb.toDynamoDBJson($ctx.args.gameId)
      }
    }
  responseMapping: $util.toJson($ctx.result)
- type: Query
  field: getQuestionByCatgIdQuesId
  dataSource: questions
  requestMapping: |
    {
      "version": "2017-02-28",
      "operation": "GetItem",
      "key": {
          "catgId": $util.dynamodb.toDynamoDBJson($ctx.args.catgId),
          "quesId": $util.dynamodb.toDynamoDBJson($ctx.args.quesId)
      }
    }
  responseMapping: $util.toJson($ctx.result)
- type: Query
  field: getQuestionByQuesId
  dataSource: questions
  requestMapping: |
    {
        "version" : "2017-02-28",
        "operation" : "Query",
        "index" : "QuesId",
        "query" : {
            "expression": "#quesId = :quesId",
            "expressionNames" : {
            "#quesId" : "quesId"
        },
            "expressionValues" : {
                ":quesId" : {
                    "N" : "$ctx.args.quesId"
                }
            }
        }
    }
  responseMapping: |
    #if($ctx.result.items.size() > 0)
      $util.toJson($ctx.result.items[0])
    #else
      null
    #end
- type: Query
  field: listGames
  dataSource: games
  requestMapping: |
    {
      "version" : "2017-02-28",
      "operation" : "Scan"
    }
  responseMapping: $util.toJson($ctx.result.items)
- type: Query
  field: listGamesByEmcee
  dataSource: games
  requestMapping: |
    {
      "version" : "2017-02-28",
      "operation" : "Query",
      "index" : "EmceeByGameId",
      "query" : {
        "expression": "emcee = :emcee",
        "expressionValues" : {
          ":emcee" : {
            "S" : "${ctx.args.emcee}"
          }
        }
      }
    }
  responseMapping: $util.toJson($ctx.result.items)
- type: Game
  field: categories
  dataSource: categories
  requestMapping: |
    {
      "version" : "2017-02-28",
      "operation" : "Query",
      "query" : {
        "expression": "gameId = :gameId",
        "expressionValues" : {
          ":gameId" : {
            "N" : "${ctx.source.gameId}"
          }
        }
      }
    }
  responseMapping: $util.toJson($ctx.result.items)
- type: Game
  field: contestants
  dataSource: contestants
  requestMapping: |
    {
      "version" : "2017-02-28",
      "operation" : "Query",
      "query" : {
        "expression": "gameId = :gameId",
        "expressionValues" : {
          ":gameId" : {
            "N" : "${ctx.source.gameId}"
          }
        }
      }
    }
  responseMapping: $util.toJson($ctx.result.items)
- type: Category
  field: questions
  dataSource: questions
  requestMapping: |
    {
      "version" : "2017-02-28",
      "operation" : "Query",
      "query" : {
        "expression": "catgId = :catgId",
        "expressionValues" : {
          ":catgId" : {
            "N" : "${ctx.source.catgId}"
          }
        }
      }
    }
  responseMapping: $util.toJson($ctx.result.items)
- type: Mutation
  field: setQuestionState
  dataSource: questions
  requestMapping: |
    {
      "version" : "2017-02-28",
      "operation" : "UpdateItem",
      "key" : {
        "catgId": $util.dynamodb.toDynamoDBJson($ctx.args.catgId),
        "quesId": $util.dynamodb.toDynamoDBJson($ctx.args.quesId)
      },
      "update" : {
        "expression" : "SET #state = :state",
        "expressionNames" : {
          "#state" : "state"
        },
        "expressionValues" : {
          ":state" : $util.dynamodb.toDynamoDBJson($ctx.args.state)
        }
      }
    }
  responseMapping: $util.toJson($ctx.result)
